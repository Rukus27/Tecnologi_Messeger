<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Prototipo de Mensajer√≠a</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            background: #f0f2f5;
            height: 100vh;
            overflow: hidden;
        }
        
        .app-container {
            display: flex;
            height: 100vh;
        }
        
        /* Sidebar con lista de contactos */
        .sidebar {
            width: 320px;
            background: white;
            border-right: 1px solid #e4e6ea;
            display: flex;
            flex-direction: column;
        }
        
        .sidebar-header {
            padding: 16px;
            background: #4267B2;
            color: white;
            font-weight: bold;
        }
        
        .search-box {
            padding: 12px;
            border-bottom: 1px solid #e4e6ea;
        }
        
        .search-box input {
            width: 100%;
            padding: 8px 12px;
            border: 1px solid #ccd0d5;
            border-radius: 20px;
            outline: none;
        }
        
        .contacts-list {
            flex: 1;
            overflow-y: auto;
        }
        
        .contact-item {
            display: flex;
            align-items: center;
            padding: 12px 16px;
            cursor: pointer;
            border-bottom: 1px solid #f0f2f5;
            transition: background 0.2s;
        }
        
        .contact-item:hover {
            background: #f0f2f5;
        }
        
        .contact-item.active {
            background: #e7f3ff;
        }
        
        .contact-avatar {
            width: 48px;
            height: 48px;
            background: #4267B2;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-weight: bold;
            margin-right: 12px;
        }
        
        .contact-info {
            flex: 1;
        }
        
        .contact-name {
            font-weight: 500;
            margin-bottom: 2px;
        }
        
        .contact-status {
            font-size: 13px;
            color: #65676b;
        }
        
        /* √Årea principal de chat */
        .chat-area {
            flex: 1;
            display: flex;
            flex-direction: column;
            background: white;
        }
        
        .chat-header {
            padding: 16px 20px;
            border-bottom: 1px solid #e4e6ea;
            display: flex;
            align-items: center;
            background: white;
        }
        
        .chat-avatar {
            width: 40px;
            height: 40px;
            background: #42b883;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-weight: bold;
            margin-right: 12px;
        }
        
        .chat-info h3 {
            margin: 0;
            font-size: 16px;
        }
        
        .chat-status {
            font-size: 13px;
            color: #65676b;
        }
        
        .messages-container {
            flex: 1;
            overflow-y: auto;
            padding: 20px;
            background: #f8f9fa;
        }
        
        .message {
            margin-bottom: 16px;
            display: flex;
            align-items: flex-end;
        }
        
        .message.sent {
            justify-content: flex-end;
        }
        
        .message-bubble {
            max-width: 70%;
            padding: 12px 16px;
            border-radius: 18px;
            word-wrap: break-word;
        }
        
        .message.sent .message-bubble {
            background: #0084ff;
            color: white;
            border-bottom-right-radius: 4px;
        }
        
        .message.received .message-bubble {
            background: #e4e6ea;
            color: #050505;
            border-bottom-left-radius: 4px;
        }
        
        .message-time {
            font-size: 11px;
            margin-top: 4px;
            opacity: 0.7;
        }
        
        .message-input-container {
            padding: 16px 20px;
            border-top: 1px solid #e4e6ea;
            background: white;
            display: flex;
            align-items: center;
            gap: 12px;
        }
        
        .message-input {
            flex: 1;
            padding: 12px 16px;
            border: 1px solid #ccd0d5;
            border-radius: 20px;
            outline: none;
            resize: none;
            font-family: inherit;
        }
        
        .send-button {
            width: 40px;
            height: 40px;
            background: #0084ff;
            color: white;
            border: none;
            border-radius: 50%;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: background 0.2s;
        }
        
        .send-button:hover {
            background: #0066cc;
        }
        
        .send-button:disabled {
            background: #ccd0d5;
            cursor: not-allowed;
        }
        
        .typing-indicator {
            font-style: italic;
            color: #65676b;
            padding: 8px 16px;
            font-size: 14px;
        }
        
        .online-dot {
            width: 12px;
            height: 12px;
            background: #42b883;
            border-radius: 50%;
            margin-left: 8px;
        }
        
        /* Componentes t√©cnicos */
        .tech-info {
            position: fixed;
            bottom: 20px;
            right: 20px;
            background: rgba(0,0,0,0.8);
            color: white;
            padding: 12px;
            border-radius: 8px;
            font-size: 12px;
            font-family: monospace;
            max-width: 300px;
        }
        
        .no-chat-selected {
            flex: 1;
            display: flex;
            align-items: center;
            justify-content: center;
            color: #65676b;
            font-size: 18px;
        }
    </style>
</head>
<body>
    <div class="app-container">
        <!-- Sidebar con contactos -->
        <div class="sidebar">
            <div class="sidebar-header">
                üí¨ MiChat Prototipo
            </div>
            
            <div class="search-box">
                <input type="text" placeholder="Buscar contactos..." id="searchInput" onkeyup="filterContacts()">
            </div>
            
            <div class="contacts-list" id="contactsList">
                <div class="contact-item active" onclick="openChat('juan', 'Juan P√©rez', 'üü¢ En l√≠nea')">
                    <div class="contact-avatar">JP</div>
                    <div class="contact-info">
                        <div class="contact-name">Juan P√©rez</div>
                        <div class="contact-status">üü¢ En l√≠nea</div>
                    </div>
                </div>
                
                <div class="contact-item" onclick="openChat('maria', 'Mar√≠a Garc√≠a', 'üîµ Hace 5 min')">
                    <div class="contact-avatar">MG</div>
                    <div class="contact-info">
                        <div class="contact-name">Mar√≠a Garc√≠a</div>
                        <div class="contact-status">üîµ Hace 5 min</div>
                    </div>
                </div>
                
                <div class="contact-item" onclick="openChat('carlos', 'Carlos L√≥pez', '‚ö´ Hace 2 horas')">
                    <div class="contact-avatar">CL</div>
                    <div class="contact-info">
                        <div class="contact-name">Carlos L√≥pez</div>
                        <div class="contact-status">‚ö´ Hace 2 horas</div>
                    </div>
                </div>
                
                <div class="contact-item" onclick="openChat('ana', 'Ana Silva', 'üü¢ En l√≠nea')">
                    <div class="contact-avatar">AS</div>
                    <div class="contact-info">
                        <div class="contact-name">Ana Silva</div>
                        <div class="contact-status">üü¢ En l√≠nea</div>
                    </div>
                </div>
            </div>
        </div>
        
        <!-- √Årea principal del chat -->
        <div class="chat-area">
            <div class="chat-header" id="chatHeader">
                <div class="chat-avatar" id="chatAvatar">JP</div>
                <div class="chat-info">
                    <h3 id="chatName">Juan P√©rez</h3>
                    <div class="chat-status" id="chatStatus">üü¢ En l√≠nea</div>
                </div>
            </div>
            
            <div class="messages-container" id="messagesContainer">
                <div class="message received">
                    <div class="message-bubble">
                        ¬°Hola! ¬øC√≥mo est√°s?
                        <div class="message-time">10:30 AM</div>
                    </div>
                </div>
                
                <div class="message sent">
                    <div class="message-bubble">
                        ¬°Hola Juan! Todo bien, ¬øy t√∫?
                        <div class="message-time">10:32 AM</div>
                    </div>
                </div>
                
                <div class="message received">
                    <div class="message-bubble">
                        Excelente, trabajando en unos proyectos nuevos üíª
                        <div class="message-time">10:35 AM</div>
                    </div>
                </div>
            </div>
            
            <div class="message-input-container">
                <input 
                    type="text" 
                    class="message-input" 
                    placeholder="Escribe un mensaje..." 
                    id="messageInput"
                    onkeypress="handleKeyPress(event)"
                >
                <button class="send-button" id="sendButton" onclick="sendMessage()">
                    ‚û§
                </button>
            </div>
        </div>
    </div>
    
    <div class="tech-info" id="techInfo">
        üí° <strong>Arquitectura del Prototipo:</strong><br>
        Frontend: HTML + CSS + JavaScript<br>
        Estado: Variables JavaScript<br>
        Simulaci√≥n: setTimeout para respuestas<br>
        <small>Click en contactos para cambiar chats</small>
    </div>

    <script>
        // Datos simulados de los chats
        const chatData = {
            'juan': {
                name: 'Juan P√©rez',
                avatar: 'JP',
                status: 'üü¢ En l√≠nea',
                messages: [
                    {type: 'received', text: '¬°Hola! ¬øC√≥mo est√°s?', time: '10:30 AM'},
                    {type: 'sent', text: '¬°Hola Juan! Todo bien, ¬øy t√∫?', time: '10:32 AM'},
                    {type: 'received', text: 'Excelente, trabajando en unos proyectos nuevos üíª', time: '10:35 AM'}
                ]
            },
            'maria': {
                name: 'Mar√≠a Garc√≠a',
                avatar: 'MG',
                status: 'üîµ Hace 5 min',
                messages: [
                    {type: 'received', text: '¬øVamos al cine ma√±ana?', time: '2:15 PM'},
                    {type: 'sent', text: '¬°Me parece genial! ¬øQu√© pel√≠cula?', time: '2:18 PM'}
                ]
            },
            'carlos': {
                name: 'Carlos L√≥pez',
                avatar: 'CL',
                status: '‚ö´ Hace 2 horas',
                messages: [
                    {type: 'sent', text: 'Hey Carlos, ¬øc√≥mo va el proyecto?', time: '11:00 AM'},
                    {type: 'received', text: 'Va muy bien, te mando el update pronto', time: '11:30 AM'}
                ]
            },
            'ana': {
                name: 'Ana Silva',
                avatar: 'AS',
                status: 'üü¢ En l√≠nea',
                messages: [
                    {type: 'received', text: 'Gracias por tu ayuda con el c√≥digo üôè', time: '9:45 AM'},
                    {type: 'sent', text: '¬°De nada! Para eso estamos', time: '9:47 AM'}
                ]
            }
        };
        
        let currentChat = 'juan';
        let messageCounter = 0;
        
        function openChat(chatId, name, status) {
            currentChat = chatId;
            const chat = chatData[chatId];
            
            // Actualizar header del chat
            document.getElementById('chatName').textContent = chat.name;
            document.getElementById('chatStatus').textContent = chat.status;
            document.getElementById('chatAvatar').textContent = chat.avatar;
            
            // Actualizar contacto activo
            document.querySelectorAll('.contact-item').forEach(item => {
                item.classList.remove('active');
            });
            event.currentTarget.classList.add('active');
            
            // Cargar mensajes
            loadMessages(chatId);
            
            updateTechInfo(`Chat activo: ${chat.name}`);
        }
        
        function loadMessages(chatId) {
            const container = document.getElementById('messagesContainer');
            const chat = chatData[chatId];
            
            container.innerHTML = '';
            
            chat.messages.forEach(message => {
                const messageDiv = document.createElement('div');
                messageDiv.className = `message ${message.type}`;
                messageDiv.innerHTML = `
                    <div class="message-bubble">
                        ${message.text}
                        <div class="message-time">${message.time}</div>
                    </div>
                `;
                container.appendChild(messageDiv);
            });
            
            container.scrollTop = container.scrollHeight;
        }
        
        function sendMessage() {
            const input = document.getElementById('messageInput');
            const text = input.value.trim();
            
            if (!text) return;
            
            // Agregar mensaje a los datos
            const currentTime = new Date().toLocaleTimeString([], {hour: '2-digit', minute:'2-digit'});
            chatData[currentChat].messages.push({
                type: 'sent',
                text: text,
                time: currentTime
            });
            
            // Mostrar mensaje
            addMessage(text, 'sent', currentTime);
            input.value = '';
            
            updateTechInfo('Mensaje enviado - simulando respuesta...');
            
            // Simular respuesta autom√°tica
            setTimeout(() => {
                showTypingIndicator();
                setTimeout(() => {
                    hideTypingIndicator();
                    const responses = [
                        'Interesante ü§î',
                        '¬°Exacto!',
                        'Me parece bien üëç',
                        'Hablamos luego',
                        'Perfecto, gracias',
                        '¬øEn serio? üòÆ'
                    ];
                    const randomResponse = responses[Math.floor(Math.random() * responses.length)];
                    const responseTime = new Date().toLocaleTimeString([], {hour: '2-digit', minute:'2-digit'});
                    
                    chatData[currentChat].messages.push({
                        type: 'received',
                        text: randomResponse,
                        time: responseTime
                    });
                    
                    addMessage(randomResponse, 'received', responseTime);
                    updateTechInfo('Respuesta autom√°tica recibida');
                }, 1500);
            }, 1000);
        }
        
        function addMessage(text, type, time) {
            const container = document.getElementById('messagesContainer');
            const messageDiv = document.createElement('div');
            messageDiv.className = `message ${type}`;
            messageDiv.innerHTML = `
                <div class="message-bubble">
                    ${text}
                    <div class="message-time">${time}</div>
                </div>
            `;
            container.appendChild(messageDiv);
            container.scrollTop = container.scrollHeight;
        }
        
        function showTypingIndicator() {
            const container = document.getElementById('messagesContainer');
            const typingDiv = document.createElement('div');
            typingDiv.className = 'typing-indicator';
            typingDiv.id = 'typing';
            typingDiv.textContent = `${chatData[currentChat].name} est√° escribiendo...`;
            container.appendChild(typingDiv);
            container.scrollTop = container.scrollHeight;
        }
        
        function hideTypingIndicator() {
            const typing = document.getElementById('typing');
            if (typing) typing.remove();
        }
        
        function handleKeyPress(event) {
            if (event.key === 'Enter') {
                sendMessage();
            }
        }
        
        function filterContacts() {
            const searchTerm = document.getElementById('searchInput').value.toLowerCase();
            const contacts = document.querySelectorAll('.contact-item');
            
            contacts.forEach(contact => {
                const name = contact.querySelector('.contact-name').textContent.toLowerCase();
                if (name.includes(searchTerm)) {
                    contact.style.display = 'flex';
                } else {
                    contact.style.display = 'none';
                }
            });
        }
        
        function updateTechInfo(message) {
            document.getElementById('techInfo').innerHTML = `
                üí° <strong>Estado T√©cnico:</strong><br>
                ${message}<br>
                Chat activo: ${chatData[currentChat].name}<br>
                <small>Mensajes: ${chatData[currentChat].messages.length}</small>
            `;
        }
        
        // Inicializar
        loadMessages('juan');
        
        // Simular actualizaciones de estado cada 10 segundos
        setInterval(() => {
            const statuses = ['üü¢ En l√≠nea', 'üîµ Hace 1 min', 'üîµ Hace 5 min'];
            const randomStatus = statuses[Math.floor(Math.random() * statuses.length)];
            document.getElementById('chatStatus').textContent = randomStatus;
        }, 10000);
    </script>
</body>
</html>